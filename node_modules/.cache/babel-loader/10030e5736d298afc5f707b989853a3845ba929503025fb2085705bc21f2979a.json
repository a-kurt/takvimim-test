{"ast":null,"code":"import _regeneratorRuntime from\"/home/atakan/Desktop/takvimim-test/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/atakan/Desktop/takvimim-test/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _toConsumableArray from\"/home/atakan/Desktop/takvimim-test/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/home/atakan/Desktop/takvimim-test/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useRef,useEffect}from'react';import axios from'../api/axios';import useAuth from'../hooks/useAuth';import{useLocation,useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var VerificationCodePage=function VerificationCodePage(){var _location$state,_location$state$from;var navigate=useNavigate();var location=useLocation();var from=((_location$state=location.state)===null||_location$state===void 0?void 0:(_location$state$from=_location$state.from)===null||_location$state$from===void 0?void 0:_location$state$from.pathname)||\"/verificationSuccess\";var _useState=useState(['','','','']),_useState2=_slicedToArray(_useState,2),codes=_useState2[0],setCodes=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),currentIndex=_useState4[0],setCurrentIndex=_useState4[1];var inputRefs=useRef([]);var _useAuth=useAuth(),auth=_useAuth.auth;var userId=auth===null||auth===void 0?void 0:auth.id;var URL='/api/v1/auth/checkCode';useEffect(function(){// Set focus to the initial input when the component mounts\ninputRefs.current[currentIndex].focus();},[currentIndex]);var handleInputChange=function handleInputChange(index,value){var newCodes=_toConsumableArray(codes);newCodes[index]=value;setCodes(newCodes);if(value!==''){if(index<codes.length-1){setCurrentIndex(index+1);}}else{if(index>0){setCurrentIndex(index-1);}}};var handleVerification=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post(URL,{id:String(userId),verificationCode:codes.join('')});case 3:response=_context.sent;if(response.data.messageType==='SUCCESS'){navigate(from,{replace:true});}_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0.message);case 10:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return function handleVerification(){return _ref.apply(this,arguments);};}();var handleResendVerification=function handleResendVerification(){// resend logic\n};return/*#__PURE__*/_jsx(\"div\",{className:\"relative flex min-h-screen flex-col justify-center overflow-hidden bg-gray-50 py-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"relative bg-white px-6 pt-10 pb-9 shadow-xl mx-auto w-full max-w-lg rounded-2xl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mx-auto flex w-full max-w-md flex-col space-y-16\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center text-center space-y-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-semibold text-3xl\",children:/*#__PURE__*/_jsx(\"p\",{children:\"E-Posta Do\\u011Frulama\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-row text-sm font-medium text-gray-400\",children:/*#__PURE__*/_jsx(\"p\",{children:\"E-posta adresinize bir kod g\\xF6nderdik\"})})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"form\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col space-y-16\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-row items-center justify-between mx-auto w-full max-w-xs\",children:codes.map(function(code,index){return/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16\",children:/*#__PURE__*/_jsx(\"input\",{ref:function ref(el){return inputRefs.current[index]=el;},className:\"w-full h-full flex flex-col items-center justify-center text-center px-5 outline-none rounded-xl border border-gray-200 text-lg bg-white focus:bg-gray-50 focus:ring-1 ring-blue-500\",type:\"text\",value:code,onChange:function onChange(e){return handleInputChange(index,e.target.value);},disabled:index!==currentIndex})},index);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col space-y-5\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"flex flex-row items-center justify-center text-center w-full border rounded-xl outline-none py-5 \".concat(codes.some(function(code){return code==='';})?'bg-gray-300 cursor-not-allowed':'bg-blue-500',\" border-none text-white text-sm shadow-sm\"),onClick:handleVerification,disabled:codes.some(function(code){return code==='';}),children:\"Hesab\\u0131 Do\\u011Frula\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-row items-center justify-center text-center text-sm font-medium space-x-1 text-gray-500\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Kod almad\\u0131n\\u0131z m\\u0131?\"}),' ',/*#__PURE__*/_jsx(\"a\",{className:\"flex flex-row items-center text-blue-500\",href:\"http://\",target:\"_blank\",rel:\"noopener noreferrer\",onClick:handleResendVerification,children:\"Yeniden g\\xF6nder\"})]})]})]})})})]})})});};export default VerificationCodePage;","map":{"version":3,"names":["React","useState","useRef","useEffect","axios","useAuth","useLocation","useNavigate","jsx","_jsx","jsxs","_jsxs","VerificationCodePage","_location$state","_location$state$from","navigate","location","from","state","pathname","_useState","_useState2","_slicedToArray","codes","setCodes","_useState3","_useState4","currentIndex","setCurrentIndex","inputRefs","_useAuth","auth","userId","id","URL","current","focus","handleInputChange","index","value","newCodes","_toConsumableArray","length","handleVerification","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","post","String","verificationCode","join","sent","data","messageType","replace","t0","console","log","message","stop","apply","arguments","handleResendVerification","className","children","map","code","ref","el","type","onChange","e","target","disabled","concat","some","onClick","href","rel"],"sources":["/home/atakan/Desktop/takvimim-test/src/pages/VerificationCodePage.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport axios from '../api/axios';\nimport useAuth from '../hooks/useAuth';\nimport { useLocation, useNavigate } from 'react-router-dom';\n\nconst VerificationCodePage = () => {\n  const navigate = useNavigate();\n  const location = useLocation();\n  const from = location.state?.from?.pathname || \"/verificationSuccess\";\n  const [codes, setCodes] = useState(['', '', '', '']);\n  const [currentIndex, setCurrentIndex] = useState(0);\n  const inputRefs = useRef([]);\n  const { auth } = useAuth();\n  const userId = auth?.id;\n  const URL = '/api/v1/auth/checkCode';\n\n  useEffect(() => {\n    // Set focus to the initial input when the component mounts\n    inputRefs.current[currentIndex].focus();\n  }, [currentIndex]);\n\n  const handleInputChange = (index, value) => {\n    const newCodes = [...codes];\n    newCodes[index] = value;\n    setCodes(newCodes);\n\n    if (value !== '') {\n      if (index < codes.length - 1) {\n        setCurrentIndex(index + 1);\n      }\n    } else {\n      if (index > 0) {\n        setCurrentIndex(index - 1);\n      }\n    }\n  };\n\n\n  const handleVerification = async () => { \n    try {\n      const response = await axios.post(URL, {\n        id: String(userId),\n        verificationCode: codes.join('')\n      });\n      if (response.data.messageType === 'SUCCESS') {\n        navigate(from, { replace: true });\n      }\n    } catch (error) {\n      console.log(error.message);\n    }\n  }\n\n  const handleResendVerification = () => {\n    // resend logic\n  }\n\n  return (\n    <div className=\"relative flex min-h-screen flex-col justify-center overflow-hidden bg-gray-50 py-12\">\n      <div className=\"relative bg-white px-6 pt-10 pb-9 shadow-xl mx-auto w-full max-w-lg rounded-2xl\">\n        <div className=\"mx-auto flex w-full max-w-md flex-col space-y-16\">\n          <div className=\"flex flex-col items-center justify-center text-center space-y-2\">\n            <div className=\"font-semibold text-3xl\">\n              <p>E-Posta Doğrulama</p>\n            </div>\n            <div className=\"flex flex-row text-sm font-medium text-gray-400\">\n              <p>E-posta adresinize bir kod gönderdik</p>\n            </div>\n          </div>\n\n          <div>\n            <form>\n              <div className=\"flex flex-col space-y-16\">\n                <div className=\"flex flex-row items-center justify-between mx-auto w-full max-w-xs\">\n                  {codes.map((code, index) => (\n                    <div className=\"w-16 h-16\" key={index}>\n                      <input\n                        ref={(el) => (inputRefs.current[index] = el)}\n                        className=\"w-full h-full flex flex-col items-center justify-center text-center px-5 outline-none rounded-xl border border-gray-200 text-lg bg-white focus:bg-gray-50 focus:ring-1 ring-blue-500\"\n                        type=\"text\"\n                        value={code}\n                        onChange={(e) => handleInputChange(index, e.target.value)}\n                        disabled={index !== currentIndex}\n                      />\n                    </div>\n                  ))}\n                </div>\n\n                <div className=\"flex flex-col space-y-5\">\n                  <div>\n                    <button\n                      type=\"button\"\n                      className={`flex flex-row items-center justify-center text-center w-full border rounded-xl outline-none py-5 ${codes.some(code => code === '') ? 'bg-gray-300 cursor-not-allowed' : 'bg-blue-500'} border-none text-white text-sm shadow-sm`}                      onClick={handleVerification}\n                      disabled={codes.some(code => code === '')}\n                    >\n                      Hesabı Doğrula\n                    </button>\n                  </div>\n\n                  <div className=\"flex flex-row items-center justify-center text-center text-sm font-medium space-x-1 text-gray-500\">\n                    <p>Kod almadınız mı?</p>{' '}\n                    <a\n                      className=\"flex flex-row items-center text-blue-500\"\n                      href=\"http://\"\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      onClick={handleResendVerification}\n                    >\n                      Yeniden gönder\n                    </a>\n                  </div>\n                </div>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default VerificationCodePage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}