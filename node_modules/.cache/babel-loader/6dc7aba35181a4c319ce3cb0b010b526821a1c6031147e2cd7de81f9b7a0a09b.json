{"ast":null,"code":"import _slicedToArray from\"/home/atakan/Desktop/takvimim-test/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import AdminSearchBar from'../components/AdminSearchBar';import AdminPanel from'../components/AdminPanel';import axios from'../api/axios';import FilteredAppointmentBox from'../components/FilteredAppointmentBox';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Admin=function Admin(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),results=_useState2[0],setResults=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),users=_useState4[0],setUsers=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),showUsers=_useState6[0],setShowUsers=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),showAppointments=_useState8[0],setShowAppointments=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),selectedResultId=_useState10[0],setSelectedResultId=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),appointments=_useState12[0],setAppointments=_useState12[1];useEffect(function(){axios.get('/api/v1/auth/users').then(function(response){setUsers(response.data);}).catch(function(error){console.error('Error fetching users:',error);});},[]);// Callback function to update users list after banning a user\nvar handleUserBan=function handleUserBan(userId){setUsers(function(prevUsers){return prevUsers.filter(function(user){return user.id!==userId;});});};var handleAppointmentClose=function handleAppointmentClose(){setShowAppointments(false);setShowUsers(true);setAppointments(null);};var handleSelectResult=function handleSelectResult(resultId){setSelectedResultId(resultId);// Make a GET request to fetch appointments for the selected user\naxios.get(\"/api/v1/auth/appointments/\".concat(resultId)).then(function(response){setAppointments(response.data);setShowAppointments(true);setShowUsers(false);}).catch(function(error){console.error('Error fetching appointments:',error);});};return/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center h-screen\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col border-[#DDDDDD] sm:w-[36rem] w-[21rem] md:w-[45rem]\",children:[/*#__PURE__*/_jsx(AdminSearchBar,{setResults:setResults,users:users}),showUsers&&/*#__PURE__*/_jsx(AdminPanel,{results:results,handleUserBan:handleUserBan,onSelectResult:handleSelectResult}),showAppointments&&/*#__PURE__*/_jsx(FilteredAppointmentBox,{appointments:appointments,onClose:handleAppointmentClose})]})});};export default Admin;","map":{"version":3,"names":["React","useEffect","useState","AdminSearchBar","AdminPanel","axios","FilteredAppointmentBox","jsx","_jsx","jsxs","_jsxs","Admin","_useState","_useState2","_slicedToArray","results","setResults","_useState3","_useState4","users","setUsers","_useState5","_useState6","showUsers","setShowUsers","_useState7","_useState8","showAppointments","setShowAppointments","_useState9","_useState10","selectedResultId","setSelectedResultId","_useState11","_useState12","appointments","setAppointments","get","then","response","data","catch","error","console","handleUserBan","userId","prevUsers","filter","user","id","handleAppointmentClose","handleSelectResult","resultId","concat","className","children","onSelectResult","onClose"],"sources":["/home/atakan/Desktop/takvimim-test/src/pages/Admin.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport AdminSearchBar from '../components/AdminSearchBar';\nimport AdminPanel from '../components/AdminPanel';\nimport axios from '../api/axios';\nimport FilteredAppointmentBox from '../components/FilteredAppointmentBox';\n\nconst Admin = () => {\n  const [results, setResults] = useState([]);\n  const [users, setUsers] = useState([]);\n  const [showUsers, setShowUsers] = useState(true);\n  const [showAppointments, setShowAppointments] = useState(false);\n  const [selectedResultId, setSelectedResultId] = useState(null);\n  const [appointments, setAppointments] = useState([]);\n\n  useEffect(() => {\n    axios.get('/api/v1/auth/users')\n      .then((response) => {\n        setUsers(response.data);\n      })\n      .catch((error) => {\n        console.error('Error fetching users:', error);\n      });\n  }, []);\n\n  // Callback function to update users list after banning a user\n  const handleUserBan = (userId) => {\n    setUsers((prevUsers) => prevUsers.filter(user => user.id !== userId));\n  };\n\n  const handleAppointmentClose = () => {\n    setShowAppointments(false);\n    setShowUsers(true);\n    setAppointments(null);\n  }\n\n  const handleSelectResult = (resultId) => {\n    setSelectedResultId(resultId);\n\n    // Make a GET request to fetch appointments for the selected user\n    axios.get(`/api/v1/auth/appointments/${resultId}`)\n      .then((response) => {\n        setAppointments(response.data);\n        setShowAppointments(true);\n        setShowUsers(false);\n      })\n      .catch((error) => {\n        console.error('Error fetching appointments:', error);\n      });\n  };\n\n  return (\n    <div className='flex justify-center items-center h-screen'>\n      <div className='flex flex-col border-[#DDDDDD] sm:w-[36rem] w-[21rem] md:w-[45rem]'>\n        <AdminSearchBar setResults={setResults} users={users} />\n        { showUsers && (\n          <AdminPanel results={results} handleUserBan={handleUserBan} onSelectResult={handleSelectResult}/>\n        )}\n        { showAppointments && (\n          <FilteredAppointmentBox appointments={appointments} onClose={handleAppointmentClose} />\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Admin;"],"mappings":"wHAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,CAAAC,cAAc,KAAM,8BAA8B,CACzD,MAAO,CAAAC,UAAU,KAAM,0BAA0B,CACjD,MAAO,CAAAC,KAAK,KAAM,cAAc,CAChC,MAAO,CAAAC,sBAAsB,KAAM,sCAAsC,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE1E,GAAM,CAAAC,KAAK,CAAG,QAAR,CAAAA,KAAKA,CAAA,CAAS,CAClB,IAAAC,SAAA,CAA8BV,QAAQ,CAAC,EAAE,CAAC,CAAAW,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAnCG,OAAO,CAAAF,UAAA,IAAEG,UAAU,CAAAH,UAAA,IAC1B,IAAAI,UAAA,CAA0Bf,QAAQ,CAAC,EAAE,CAAC,CAAAgB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAA/BE,KAAK,CAAAD,UAAA,IAAEE,QAAQ,CAAAF,UAAA,IACtB,IAAAG,UAAA,CAAkCnB,QAAQ,CAAC,IAAI,CAAC,CAAAoB,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAAzCE,SAAS,CAAAD,UAAA,IAAEE,YAAY,CAAAF,UAAA,IAC9B,IAAAG,UAAA,CAAgDvB,QAAQ,CAAC,KAAK,CAAC,CAAAwB,UAAA,CAAAZ,cAAA,CAAAW,UAAA,IAAxDE,gBAAgB,CAAAD,UAAA,IAAEE,mBAAmB,CAAAF,UAAA,IAC5C,IAAAG,UAAA,CAAgD3B,QAAQ,CAAC,IAAI,CAAC,CAAA4B,WAAA,CAAAhB,cAAA,CAAAe,UAAA,IAAvDE,gBAAgB,CAAAD,WAAA,IAAEE,mBAAmB,CAAAF,WAAA,IAC5C,IAAAG,WAAA,CAAwC/B,QAAQ,CAAC,EAAE,CAAC,CAAAgC,WAAA,CAAApB,cAAA,CAAAmB,WAAA,IAA7CE,YAAY,CAAAD,WAAA,IAAEE,eAAe,CAAAF,WAAA,IAEpCjC,SAAS,CAAC,UAAM,CACdI,KAAK,CAACgC,GAAG,CAAC,oBAAoB,CAAC,CAC5BC,IAAI,CAAC,SAACC,QAAQ,CAAK,CAClBnB,QAAQ,CAACmB,QAAQ,CAACC,IAAI,CAAC,CACzB,CAAC,CAAC,CACDC,KAAK,CAAC,SAACC,KAAK,CAAK,CAChBC,OAAO,CAACD,KAAK,CAAC,uBAAuB,CAAEA,KAAK,CAAC,CAC/C,CAAC,CAAC,CACN,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,GAAM,CAAAE,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAIC,MAAM,CAAK,CAChCzB,QAAQ,CAAC,SAAC0B,SAAS,QAAK,CAAAA,SAAS,CAACC,MAAM,CAAC,SAAAC,IAAI,QAAI,CAAAA,IAAI,CAACC,EAAE,GAAKJ,MAAM,GAAC,GAAC,CACvE,CAAC,CAED,GAAM,CAAAK,sBAAsB,CAAG,QAAzB,CAAAA,sBAAsBA,CAAA,CAAS,CACnCtB,mBAAmB,CAAC,KAAK,CAAC,CAC1BJ,YAAY,CAAC,IAAI,CAAC,CAClBY,eAAe,CAAC,IAAI,CAAC,CACvB,CAAC,CAED,GAAM,CAAAe,kBAAkB,CAAG,QAArB,CAAAA,kBAAkBA,CAAIC,QAAQ,CAAK,CACvCpB,mBAAmB,CAACoB,QAAQ,CAAC,CAE7B;AACA/C,KAAK,CAACgC,GAAG,8BAAAgB,MAAA,CAA8BD,QAAQ,CAAE,CAAC,CAC/Cd,IAAI,CAAC,SAACC,QAAQ,CAAK,CAClBH,eAAe,CAACG,QAAQ,CAACC,IAAI,CAAC,CAC9BZ,mBAAmB,CAAC,IAAI,CAAC,CACzBJ,YAAY,CAAC,KAAK,CAAC,CACrB,CAAC,CAAC,CACDiB,KAAK,CAAC,SAACC,KAAK,CAAK,CAChBC,OAAO,CAACD,KAAK,CAAC,8BAA8B,CAAEA,KAAK,CAAC,CACtD,CAAC,CAAC,CACN,CAAC,CAED,mBACElC,IAAA,QAAK8C,SAAS,CAAC,2CAA2C,CAAAC,QAAA,cACxD7C,KAAA,QAAK4C,SAAS,CAAC,oEAAoE,CAAAC,QAAA,eACjF/C,IAAA,CAACL,cAAc,EAACa,UAAU,CAAEA,UAAW,CAACG,KAAK,CAAEA,KAAM,CAAE,CAAC,CACtDI,SAAS,eACTf,IAAA,CAACJ,UAAU,EAACW,OAAO,CAAEA,OAAQ,CAAC6B,aAAa,CAAEA,aAAc,CAACY,cAAc,CAAEL,kBAAmB,CAAC,CACjG,CACCxB,gBAAgB,eAChBnB,IAAA,CAACF,sBAAsB,EAAC6B,YAAY,CAAEA,YAAa,CAACsB,OAAO,CAAEP,sBAAuB,CAAE,CACvF,EACE,CAAC,CACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAvC,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}