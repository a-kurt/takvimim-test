{"ast":null,"code":"import _regeneratorRuntime from\"/home/atakan/Desktop/takvimim-test/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/atakan/Desktop/takvimim-test/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/atakan/Desktop/takvimim-test/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import Calendar from'./Calendar';import AppointmentsBox from'./AppointmentsBox';import RequestBox from'./RequestBox';import useAuth from'../hooks/useAuth';import UserService from'../api/UserService';import{format,parse}from'date-fns';import FilteredAppointmentBox from'./FilteredAppointmentBox';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MainBar=function MainBar(){var _useState=useState('Takvimim'),_useState2=_slicedToArray(_useState,2),selectedLink=_useState2[0],setSelectedLink=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),selectedDate=_useState4[0],setSelectedDate=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),appointments=_useState6[0],setAppointments=_useState6[1];var _useAuth=useAuth(),auth=_useAuth.auth;var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),filteredAppointments=_useState8[0],setFilteredAppointments=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),showFilteredAppointments=_useState10[0],setShowFilteredAppointments=_useState10[1];var handleLinkClick=function handleLinkClick(link){setShowFilteredAppointments(false);setSelectedLink(link);};var formatDate=function formatDate(date){var year=date.getFullYear();var month=String(date.getMonth()+1).padStart(2,'0');var day=String(date.getDate()).padStart(2,'0');return\"\".concat(year,\"-\").concat(month,\"-\").concat(day);};var handleDayClick=function handleDayClick(date){setSelectedDate(date);var formattedSelectedDate=formatDate(date);var temp=appointments.filter(function(appointment){var formattedAppointmentDate=formatDate(new Date(appointment.startTime));return formattedAppointmentDate===formattedSelectedDate;});setFilteredAppointments(temp);setShowFilteredAppointments(true);};useEffect(function(){var userId=auth===null||auth===void 0?void 0:auth.id;var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return UserService.getAppointments(\"/api/v1/auth/appointments/\".concat(userId));case 3:response=_context.sent;setAppointments(response);// Assuming response is an array or the structure you need\n_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);// Handle errors\nconsole.error(\"Error fetching appointments:\",_context.t0);case 10:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[]);var handleFilteredAppointmentsClose=function handleFilteredAppointmentsClose(){setShowFilteredAppointments(false);};return/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-row border rounded-sm border-[#DDDDDD] sm:w-[36rem] w-[21rem] md:w-[45rem]\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"sm:w-36 sm:h-16 w-28 h-14 \".concat(selectedLink==='Takvimim'?'border-b-2 border-blue-500 text-blue-500':'text-[#252B42]'),children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"h-full w-full flex items-center justify-center font-medium hover:bg-gray-100\",onClick:function onClick(){return handleLinkClick('Takvimim');},children:\"Takvimim\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"sm:w-36 sm:h-16 w-28 h-14 \".concat(selectedLink==='Randevularım'?'border-b-2 border-blue-500 text-blue-500':'text-[#252B42]'),children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"h-full w-full flex items-center justify-center font-medium hover:bg-gray-100\",onClick:function onClick(){return handleLinkClick('Randevularım');},children:\"Randevular\\u0131m\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"sm:w-36 sm:h-16 w-28 h-14 \".concat(selectedLink==='İstekler'?'border-b-2 border-blue-500 text-blue-500':'text-[#252B42]'),children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"h-full w-full flex items-center justify-center font-medium hover:bg-gray-100\",onClick:function onClick(){return handleLinkClick('İstekler');},children:\"\\u0130stekler\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-36 h-16 hidden sm:block\",children:/*#__PURE__*/_jsx(\"a\",{href:\"/music\",className:\"h-full w-full flex items-center justify-center text-[#252B42] font-medium hover:text-blue-500 hover:bg-gray-100\",children:\"Takvim Payla\\u015F\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"sm:w-36 sm:h-16 w-28 h-14 hidden md:block\"})]}),selectedLink==='Takvimim'&&!showFilteredAppointments&&/*#__PURE__*/_jsx(Calendar,{onDayClick:handleDayClick,meetings:appointments,isUsersCalendar:true}),selectedLink==='Takvimim'&&showFilteredAppointments&&/*#__PURE__*/_jsx(FilteredAppointmentBox,{appointments:filteredAppointments,onClose:handleFilteredAppointmentsClose}),selectedLink==='Randevularım'&&/*#__PURE__*/_jsx(AppointmentsBox,{appointments:appointments}),selectedLink==='İstekler'&&/*#__PURE__*/_jsx(RequestBox,{appointments:appointments})]});};export default MainBar;","map":{"version":3,"names":["React","useEffect","useState","Calendar","AppointmentsBox","RequestBox","useAuth","UserService","format","parse","FilteredAppointmentBox","jsx","_jsx","jsxs","_jsxs","MainBar","_useState","_useState2","_slicedToArray","selectedLink","setSelectedLink","_useState3","_useState4","selectedDate","setSelectedDate","_useState5","_useState6","appointments","setAppointments","_useAuth","auth","_useState7","_useState8","filteredAppointments","setFilteredAppointments","_useState9","_useState10","showFilteredAppointments","setShowFilteredAppointments","handleLinkClick","link","formatDate","date","year","getFullYear","month","String","getMonth","padStart","day","getDate","concat","handleDayClick","formattedSelectedDate","temp","filter","appointment","formattedAppointmentDate","Date","startTime","userId","id","fetchData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","getAppointments","sent","t0","console","error","stop","apply","arguments","handleFilteredAppointmentsClose","children","className","href","onClick","onDayClick","meetings","isUsersCalendar","onClose"],"sources":["/home/atakan/Desktop/takvimim-test/src/components/MainBar.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport Calendar from './Calendar';\nimport AppointmentsBox from './AppointmentsBox';\nimport RequestBox from './RequestBox';\nimport useAuth from '../hooks/useAuth';\nimport UserService from '../api/UserService';\nimport { format, parse } from 'date-fns';\nimport FilteredAppointmentBox from './FilteredAppointmentBox';\n\nconst MainBar = () => {\n  const [selectedLink, setSelectedLink] = useState('Takvimim');\n  const [selectedDate, setSelectedDate] = useState(null);\n  const [appointments, setAppointments] = useState([]);\n  const { auth } = useAuth();\n  const [filteredAppointments, setFilteredAppointments] = useState([]);\n  const [showFilteredAppointments, setShowFilteredAppointments] = useState(false);\n\n  const handleLinkClick = (link) => {\n    setShowFilteredAppointments(false);\n    setSelectedLink(link);\n  };\n  \n  const formatDate = (date) => {\n    const year = date.getFullYear();\n    const month = String(date.getMonth() + 1).padStart(2, '0');\n    const day = String(date.getDate()).padStart(2, '0');\n  \n    return `${year}-${month}-${day}`;\n  };\n  \n  const handleDayClick = (date) => {\n    setSelectedDate(date);\n  \n    const formattedSelectedDate = formatDate(date);\n  \n    const temp = appointments.filter(appointment => {\n      const formattedAppointmentDate = formatDate(new Date(appointment.startTime));\n  \n      return formattedAppointmentDate === formattedSelectedDate;\n    });\n    \n    setFilteredAppointments(temp);\n    setShowFilteredAppointments(true);\n  };\n\n  useEffect(() => {\n    const userId = auth?.id;\n    const fetchData = async () => {\n      try {\n        const response = await UserService.getAppointments(\n          `/api/v1/auth/appointments/${userId}`\n        );\n        setAppointments(response); // Assuming response is an array or the structure you need\n      } catch (error) {\n        // Handle errors\n        console.error(\"Error fetching appointments:\", error);\n      }\n    };\n\n    fetchData();\n  }, []);\n\n  const handleFilteredAppointmentsClose = () => {\n    setShowFilteredAppointments(false);\n  };\n  \n  return (\n    <section>\n      <div className='flex flex-row border rounded-sm border-[#DDDDDD] sm:w-[36rem] w-[21rem] md:w-[45rem]'>\n        <div className={`sm:w-36 sm:h-16 w-28 h-14 ${selectedLink === 'Takvimim' ? 'border-b-2 border-blue-500 text-blue-500' : 'text-[#252B42]'}`}>\n          <a href='#' className='h-full w-full flex items-center justify-center font-medium hover:bg-gray-100' onClick={() => handleLinkClick('Takvimim')}>\n            Takvimim\n          </a>\n        </div>\n        <div className={`sm:w-36 sm:h-16 w-28 h-14 ${selectedLink === 'Randevularım' ? 'border-b-2 border-blue-500 text-blue-500' : 'text-[#252B42]'}`}>\n          <a href='#' className='h-full w-full flex items-center justify-center font-medium hover:bg-gray-100' onClick={() => handleLinkClick('Randevularım')}>\n            Randevularım\n          </a>\n        </div>\n        <div className={`sm:w-36 sm:h-16 w-28 h-14 ${selectedLink === 'İstekler' ? 'border-b-2 border-blue-500 text-blue-500' : 'text-[#252B42]'}`}>\n          <a href='#' className='h-full w-full flex items-center justify-center font-medium hover:bg-gray-100' onClick={() => handleLinkClick('İstekler')}>\n            İstekler\n          </a>\n        </div>\n        <div className='w-36 h-16 hidden sm:block'>\n          <a href='/music' className='h-full w-full flex items-center justify-center text-[#252B42] font-medium hover:text-blue-500 hover:bg-gray-100'>Takvim Paylaş</a>\n        </div>\n        <div className='sm:w-36 sm:h-16 w-28 h-14 hidden md:block'></div>\n      </div>\n        {selectedLink === 'Takvimim' && !showFilteredAppointments && (\n          <Calendar onDayClick={handleDayClick} meetings={appointments} isUsersCalendar={true} />\n        )}\n        {selectedLink === 'Takvimim' && showFilteredAppointments && (\n          <FilteredAppointmentBox appointments={filteredAppointments} onClose={handleFilteredAppointmentsClose}/>\n        )}\n        {selectedLink === 'Randevularım' && <AppointmentsBox appointments={appointments}/>}\n        {selectedLink === 'İstekler' && <RequestBox appointments={appointments}/>}\n    </section>\n  );\n};\n\nexport default MainBar;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}